inorderにちゃんと昇順になっているかを見ていくか上限と下限を意識してノードを見ていくか。

1st

DFS stack inorder
昇順になっているか。
```python
class Solution:
    def isValidBST(self, root: Optional[TreeNode]) -> bool:
        if root is None:
            return True
        nodes = []
        current = root
        prev_value = -inf
        # 左がある場合はひたすらスタックに積む。なくなったらポップして、右のノードに移り同様のことを繰り返す
        while nodes or current:
            while current:
                nodes.append(current)
                current = current.left
            node = nodes.pop()
            if prev_value >= node.val:
                return False
            prev_value = node.val
            current = node.right
        return True
```

DFS recursion
上限と下限のルールを満たしているか。
```python
class Solution:
    def isValidBST(self, root: Optional[TreeNode]) -> bool:
        def is_valid(node, lower, upper):
            if node is None:
                return True
            if not (lower < node.val < upper):
                return False
            return is_valid(node.left, lower, node.val) and is_valid(node.right, node.val, upper)
        return is_valid(root, -inf, inf)
```

2nd

上限と下限のルールを満たしているか、recursion
```python
class Solution:
    def isValidBST(self, root: Optional[TreeNode]) -> bool:
        if root is None:
            return True
        nodes = [(root, -inf, inf)] # (node, lower_limit, upper_limit)
        while nodes:
            node, lower, upper = nodes.pop()
            if node is None:
                continue
            if not (lower < node.val < upper):
                return False
            nodes.append((node.left, lower, node.val))
            nodes.append((node.right, node.val, upper))
        return True
```

3rd

```python
class Solution:
    def isValidBST(self, root: Optional[TreeNode]) -> bool:
        if root is None:
            return True
        nodes = [(root, -inf, inf)]
        while nodes:
            node, lower, upper = nodes.pop()
            if node is None:
                continue
            if not (lower < node.val < upper):
                return False
            nodes.append((node.left, lower, node.val))
            nodes.append((node.right, node.val, upper))
        return True
```
