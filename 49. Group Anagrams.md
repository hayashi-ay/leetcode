アナグラムなので並べ替えたら同じ文字列になる。ソートした文字列をキーにグループすればよい。
ソートが $O(n log\ n)$で気になるなら文字数の出現をカウントしてそれをキーにすれば良い。例）aabcd -> a2b1c1d1
ランレングスエンコーディング的なイメージ。こちらだと計算量は $O(n)$ になる。ただ少し実装がめんどくさくなるのとPythonのソートはビルトインでPowersortで実装されているので処理がされるのでソートの方がシンプルでかつ速度ももしかするとソートの方が早そう。


1st

```python
class Solution:
    def groupAnagrams(self, strs: List[str]) -> List[List[str]]:
        groups = defaultdict(list)
        for s in strs:
            key = "".join(sorted(s))
            groups[key].append(s)
        return groups.values()
```

2nd

tupleがハッシュ可能なことをしらなかったが、tupleをハッシュキーにした方がシンプルに書けそう。
immutableなものがハッシュ可能。listなどは可変なのでハッシュ化できない。

```python
class Solution:
    def groupAnagrams(self, strs: List[str]) -> List[List[str]]:
        groups = defaultdict(list)
        for s in strs:
            groups[tuple(sorted(s))].append(s)
        return groups.values()
```

countした版。関数に切り出すかは好み。
LeetCode上のテストケースでは↑の解法とそこまで実行時間が変わらない。

```python
class Solution:
    def groupAnagrams(self, strs: List[str]) -> List[List[str]]:
        def count_alpha(s):
            counts = [0] * 26
            for c in s:
                counts[ord(c) - ord('a')] += 1
            return tuple(counts)
            
        groups = defaultdict(list)
        for s in strs:
            groups[count_alpha(s)].append(s)
        return groups.values()
```

3rd

2ndの1番上と同じ。

```python
class Solution:
    def groupAnagrams(self, strs: List[str]) -> List[List[str]]:
        groups = defaultdict(list)
        for s in strs:
            groups[tuple(sorted(s))].append(s)
        return groups.values()
```

dictのvaluesはlistでなくview objectを返す

https://docs.python.org/3/library/stdtypes.html#dict-views

> The objects returned by dict.keys(), dict.values() and dict.items() are view objects.

4th

3rdの回答をベースにlistを返すように。

```python
class Solution:
    def groupAnagrams(self, strs: List[str]) -> List[List[str]]:
        groups = defaultdict(list)
        for s in strs:
            groups[tuple(sorted(s))].append(s)
        return list(groups.values())
```

答えの配列に重複を許さない版。LeetCode上の想定とは異なるのでfailする

```python
class Solution:
    def groupAnagrams(self, strs: List[str]) -> List[List[str]]:
        groups = defaultdict(set)
        for s in strs:
            groups[tuple(sorted(s))].add(s)
        ans = []
        for anagrams_set in groups.values():
            ans.append(list(anagrams_set))
        return ans
```
