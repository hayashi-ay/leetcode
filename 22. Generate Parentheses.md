n=1, 2, 3くらいで実験してみたが法則性が分からず。
nの最大が8なので、単純に全通り試して、有効な括弧かどうかを判定する感じで良いかも。

1st

```python
class Solution:
    def generateParenthesis(self, n: int) -> List[str]:
        all_valid_parenthesis = []
        partial_parenthesis = []

        def make_parenthesis(index, num_left_brackets):
            if index == n * 2:
                if num_left_brackets == 0:
                    all_valid_parenthesis.append("".join(partial_parenthesis))
                return
            if num_left_brackets < 0 or num_left_brackets > n:
                return
            # append left brackets
            partial_parenthesis.append('(')
            make_parenthesis(index + 1, num_left_brackets + 1)
            partial_parenthesis.pop()

            # append right brackets
            partial_parenthesis.append(')')
            make_parenthesis(index + 1, num_left_brackets - 1)
            partial_parenthesis.pop()

        make_parenthesis(0, 0)
        return all_valid_parenthesis
```

2nd

単数形（parenthesis）、複数形（parentheses）をちゃんと使い分けるようにしたくらい。

```python
class Solution:
    def generateParenthesis(self, n: int) -> List[str]:
        all_valid_parentheses = []
        partial_parenthesis = []

        def make_parenthesis(index, num_left_brackets):
            if index == n * 2:
                if num_left_brackets == 0:
                    all_valid_parentheses.append("".join(partial_parenthesis))
                return
            if num_left_brackets < 0 or num_left_brackets > n:
                return
            # append left brackets
            partial_parenthesis.append('(')
            make_parenthesis(index + 1, num_left_brackets + 1)
            partial_parenthesis.pop()

            # append right brackets
            partial_parenthesis.append(')')
            make_parenthesis(index + 1, num_left_brackets - 1)
            partial_parenthesis.pop()
        
        make_parenthesis(0, 0)
        return all_valid_parentheses
```

3rd

今のコードはシンプルで良いと思うが、num_left_bracketsだけトラッキングしていると、枝刈り漏れがあるので左括弧の数とペアになっていない左括弧の2つの変数を管理するのも良いかもしれないと思った。

```python
class Solution:
    def generateParenthesis(self, n: int) -> List[str]:
        all_valid_parentheses = []
        partial_parenthesis = []

        def make_parenthesis(index, num_left_brackets):
            if index == n * 2:
                if num_left_brackets == 0:
                    all_valid_parentheses.append("".join(partial_parenthesis))
                return
            if num_left_brackets < 0 or num_left_brackets > n:
                return
            # append a left bracket
            partial_parenthesis.append('(')
            make_parenthesis(index + 1, num_left_brackets + 1)
            partial_parenthesis.pop()

            # append a right bracket
            partial_parenthesis.append(')')
            make_parenthesis(index + 1, num_left_brackets - 1)
            partial_parenthesis.pop()

        make_parenthesis(0, 0)
        return all_valid_parentheses
```

4th

再帰呼び出しを減らす。
```python
class Solution:
    def generateParenthesis(self, n: int) -> List[str]:
        all_valid_parentheses = []
        partial_parenthesis = []

        def make_parenthesis(index, num_left_brackets):
            if index == n * 2:
                if num_left_brackets == 0:
                    all_valid_parentheses.append("".join(partial_parenthesis))
                return
            
            if num_left_brackets > 0:
                partial_parenthesis.append(')')
                make_parenthesis(index + 1, num_left_brackets - 1)
                partial_parenthesis.pop()
            
            if num_left_brackets < n:
                partial_parenthesis.append('(')
                make_parenthesis(index + 1, num_left_brackets + 1)
                partial_parenthesis.pop()
        
        make_parenthesis(0, 0)
        return all_valid_parentheses
```
